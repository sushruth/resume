<? import type { WorkEntry } from '../../sync.types'; ?>
<? /* Group can be either a single entry or a grouped employer with multiple roles */ ?>

<? if (group.roles) { ?>
<? /* Grouped employer - one company with multiple roles */ ?>
\subsection{{<?= group.name || '' ?>}}
\subtext{<?= group.location || '' ?> \hfill <?= group.dateRange || '' ?>}
\vspace*{3pt}

<? group.roles.forEach((role, index) => { ?>
<? const roleDateRange = `${role.startDate || ''} - ${role.endDate || ''}`; ?>
\textbf{<?= role.position || '' ?>} \hfill \textit{<?= roleDateRange ?>}
<? if (role.summary) { ?>
\vspace*{1pt}
<?= role.summary ?>
<? } ?>
\begin{zitemize}
<? (role.highlights || []).forEach(highlight => { ?>
\item <?= highlight ?>
<? }) ?>
\end{zitemize}
<? if (index < group.roles.length - 1) { ?>\vspace*{4pt}<? } ?>
<? }) ?>
\vspace*{3pt}

<? } else { ?>
<? /* Single entry - same structure as grouped, just one role */ ?>
<? const entry = group; ?>
<? const dateRange = `${entry.startDate || ''} - ${entry.endDate || ''}`; ?>

\subsection{{<?= entry.name || '' ?>}}
\subtext{<?= entry.location || '' ?> \hfill <?= dateRange ?>}
\vspace*{3pt}

\textbf{<?= entry.position || '' ?>}
<? if (entry.summary) { ?>
\vspace*{1pt}
<?= entry.summary ?>
<? } ?>
\begin{zitemize}
<? (entry.highlights || []).forEach(highlight => { ?>
\item <?= highlight ?>
<? }) ?>
\end{zitemize}
\vspace*{3pt}
<? } ?>
